
<!-- Licensed under a BSD license. See license.html for license -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>WebGL - 2D Rectangles</title>
    <link type="text/css" href="resources/webgl-tutorials.css" rel="stylesheet" />
    <script type="text/javascript" src="resources/webgl-utils.js"></script>
    <script>
        window.onload = main;

        function main() {
            // Get A WebGL context
            var canvas = document.getElementById("canvas");
            var gl = getWebGLContext(canvas);
            if (!gl) {
                return;
            }

            // setup GLSL program
            vertexShader = createShaderFromScriptElement(gl, "2d-vertex-shader");
            fragmentShader = createShaderFromScriptElement(gl, "2d-fragment-shader");
            program = createProgram(gl, [vertexShader, fragmentShader]);
            gl.useProgram(program);

            // look up where the vertex data needs to go.
            var positionLocation = gl.getAttribLocation(program, "a_position");

            // lookup uniforms
            var resolutionLocation = gl.getUniformLocation(program, "u_resolution");
            var colorLocation = gl.getUniformLocation(program, "u_color");

            // set the resolution
            gl.uniform2f(resolutionLocation, canvas.width, canvas.height);

            // Create a buffer.
            var buffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
            gl.enableVertexAttribArray(positionLocation);
            gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

            var col = new Array(4);

            color(col,0.0,0.0,0.0,1.0);

            rect(gl,colorLocation,col,0,0,canvas.width,canvas.height);

            // draw 50 random rectangles in random colors
            /*
            for (var ii = 0; ii < 50; ++ii) {
                // Setup a random rectangle
                setRectangle(
                        gl, randomInt(300), randomInt(300), randomInt(300), randomInt(300));

                // Set a random color.
                gl.uniform4f(colorLocation, Math.random(), Math.random(), Math.random(), 1);

                // Draw the rectangle.
                gl.drawArrays(gl.TRIANGLES, 0, 6);
            }
            */
        }

        function color(c,r,g,b,a)
        {
            c[0] = r;
            c[1] = g;
            c[2] = b;
            c[3] = a;




        }

        function rect(gl,colorLocation,color,x,y,width,height)
        {
            var x1 = x;
            var x2 = x + width;
            var y1 = y;
            var y2 = y + height;
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
                x1, y1,
                x2, y1,
                x1, y2,
                x1, y2,
                x2, y1,
                x2, y2]), gl.STATIC_DRAW);

            gl.uniform4f(colorLocation, color[0], color[1], color[2], 1);

            gl.drawArrays(gl.TRIANGLES, 0, 6);


        }

        // Returns a random integer from 0 to range - 1.
        function randomInt(range) {
            return Math.floor(Math.random() * range);
        }

        // Fill the buffer with the values that define a rectangle.
        function setRectangle(gl, x, y, width, height) {
            var x1 = x;
            var x2 = x + width;
            var y1 = y;
            var y2 = y + height;
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
                x1, y1,
                x2, y1,
                x1, y2,
                x1, y2,
                x2, y1,
                x2, y2]), gl.STATIC_DRAW);
        }

    </script>
    <!-- vertex shader -->
    <script id="2d-vertex-shader" type="x-shader/x-vertex">
        attribute vec2 a_position;

        uniform vec2 u_resolution;

        void main() {
        // convert the rectangle from pixels to 0.0 to 1.0
        vec2 zeroToOne = a_position / u_resolution;

        // convert from 0->1 to 0->2
        vec2 zeroToTwo = zeroToOne * 2.0;

        // convert from 0->2 to -1->+1 (clipspace)
        vec2 clipSpace = zeroToTwo - 1.0;

        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
        }
    </script></script>
    <!-- fragment shader -->
    <script id="2d-fragment-shader" type="x-shader/x-fragment">
            precision mediump float;

    uniform vec4 u_color;

    void main() {
        gl_FragColor = u_color;
    }
    </script>
</head>
<body>
<canvas id="canvas" width="400" height="300"></canvas>
</body>
</html>


